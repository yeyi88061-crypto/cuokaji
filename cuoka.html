<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·±åº¦è§’è‰²å¡ç”Ÿæˆå™¨ (YAMLç‰ˆ)</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-main: #e0e0e0;
            --text-sub: #a0a0a0;
            --accent: #4a9eff;
            --accent-hover: #3b7ecc;
            --danger: #ff5c5c;
            --input-bg: #363636;
            --border: #444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: var(--accent);
            margin-bottom: 30px;
        }

        .section {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--accent);
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .full-width {
            grid-column: span 2;
        }

        .form-group {
            margin-bottom: 10px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-sub);
            font-size: 0.9em;
        }

        input[type="text"], textarea, select {
            width: 100%;
            padding: 10px;
            background-color: var(--input-bg);
            border: 1px solid var(--border);
            color: var(--text-main);
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* åŠ¨æ€åˆ—è¡¨æ ·å¼ */
        .dynamic-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .dynamic-item {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }

        .btn-add {
            background-color: #384d38;
            color: #8aff8a;
            border: 1px solid #4a664a;
            font-size: 0.8em;
        }

        .btn-add:hover {
            background-color: #4a664a;
        }

        .btn-remove {
            background-color: #4d3838;
            color: #ff8a8a;
            border: 1px solid #664a4a;
            padding: 10px;
        }

        .btn-remove:hover {
            background-color: #664a4a;
        }

        .btn-generate {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--accent);
            color: white;
            font-size: 1.1em;
            margin-top: 30px;
        }

        .btn-generate:hover {
            background-color: var(--accent-hover);
        }

        /* ç»“æœå±•ç¤ºåŒº */
        #result-area {
            margin-top: 30px;
            display: none;
        }

        #output {
            width: 100%;
            height: 400px;
            background-color: #111;
            color: #0f0;
            font-family: 'Consolas', 'Monaco', monospace;
            padding: 15px;
            border: 1px solid var(--accent);
        }

        .btn-copy {
            background-color: #444;
            color: white;
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ§¬ æ·±åº¦äººç‰©å¡ç”Ÿæˆå™¨ (Human Soul)</h1>
    <p style="text-align: center; color: #888; margin-bottom: 20px;">å¡«å†™ç»†èŠ‚ -> ç”Ÿæˆ YAML -> å¤åˆ¶ç»™ AI</p>

    <!-- 1. åŸºç¡€ä¿¡æ¯ -->
    <div class="section">
        <div class="section-title">I. åŸºç¡€é”šç‚¹ (Identity)</div>
        <div class="form-grid">
            <div class="form-group">
                <label>è§’è‰²å…¨å</label>
                <input type="text" id="name" placeholder="ä¾‹å¦‚ï¼šæ±‰å°¼æ‹”Â·è±å…‹ç‰¹">
            </div>
            <div class="form-group">
                <label>èº«ä»½/èŒä¸š</label>
                <input type="text" id="role" placeholder="ä¾‹å¦‚ï¼šå¿ƒç†åŒ»ç”Ÿ / è¿ç¯æ€æ‰‹">
            </div>
            <div class="form-group">
                <label>å¹´é¾„ (ç”Ÿç†/å¿ƒç†)</label>
                <input type="text" id="age" placeholder="ä¾‹å¦‚ï¼š45å² / å¿ƒç†è‹è€å¦‚ç™¾å²">
            </div>
            <div class="form-group">
                <label>ç”Ÿæ—¥/æ˜Ÿåº§</label>
                <input type="text" id="birthday" placeholder="ä¾‹å¦‚ï¼š1æœˆ20æ—¥ / æ°´ç“¶åº§">
            </div>
        </div>
    </div>

    <!-- 2. ç”Ÿç†ä¸å¤–è²Œ -->
    <div class="section">
        <div class="section-title">II. ç”Ÿç†ä¸å¤–è²Œ (Physical)</div>
        <div class="form-grid">
            <div class="form-group full-width">
                <label>æ ¸å¿ƒæ°›å›´ (Vibe)</label>
                <input type="text" id="appearance_vibe" placeholder="ä¾‹å¦‚ï¼šåƒä¸€æŠŠåšå·¥ç²¾è‰¯ä½†æ²¾è¡€çš„æ‰‹æœ¯åˆ€">
            </div>
            <div class="form-group">
                <label>æ°”å‘³/å£°éŸ³ (Sensory)</label>
                <input type="text" id="sensory" placeholder="ä¾‹å¦‚ï¼šèº«ä¸Šæœ‰æ·¡æ·¡çš„æ¶ˆæ¯’æ°´å‘³ï¼Œå£°éŸ³ä½æ²‰æ²™å“‘">
            </div>
            <div class="form-group">
                <label>å¥åº·éšæ‚£ (Health)</label>
                <input type="text" id="health" placeholder="ä¾‹å¦‚ï¼šæ‚£æœ‰ä¸¥é‡çš„åå¤´ç—›ï¼Œå³è…¿é˜´é›¨å¤©ä¼šç—›">
            </div>
        </div>
    </div>

    <!-- 3. åŸç”Ÿå®¶åº­ä¸æˆé•¿ -->
    <div class="section">
        <div class="section-title">III. æ ¹æº (Roots)</div>
        <div class="form-grid">
            <div class="form-group">
                <label>çˆ¶äº²è§’è‰²çš„å½±å“</label>
                <input type="text" id="father_imprint" placeholder="ä¾‹å¦‚ï¼šç¼ºå¸­ï¼Œå¯¼è‡´ä»–å¯¹æƒå¨çš„è”‘è§†">
            </div>
            <div class="form-group">
                <label>æ¯äº²è§’è‰²çš„å½±å“</label>
                <input type="text" id="mother_imprint" placeholder="ä¾‹å¦‚ï¼šæººçˆ±ï¼Œå¯¼è‡´ä»–æ— æ³•å¿å—æ‹’ç»">
            </div>
            <div class="form-group full-width">
                <label>äººç”Ÿè½¬æŠ˜ç‚¹ (Turning Point)</label>
                <textarea id="turning_point" placeholder="å½»åº•æ”¹å˜ä»–ä¸–ç•Œè§‚çš„é‚£ä¸ªäº‹ä»¶..."></textarea>
            </div>
        </div>
    </div>

    <!-- 4. æ€§æ ¼ (å¯å¢å‡) -->
    <div class="section">
        <div class="section-title">
            IV. æ€§æ ¼å…‰è°± (Personality)
            <button class="btn btn-add" onclick="addDynamicItem('personality-list', 'ç‰¹å¾', 'ä¾‹å¦‚ï¼šæ¯’èˆŒã€å‚²å¨‡ã€å†·æ¼ ')">+ æ·»åŠ ç‰¹å¾</button>
        </div>
        <div class="form-group">
            <label>ç¤¾äº¤é¢å…· (Mask)</label>
            <input type="text" id="social_mask" placeholder="ä»–å¯¹é™Œç”Ÿäººå±•ç¤ºçš„æ ·å­">
        </div>
        <div class="form-group">
            <label>å¾…äººæ¥ç‰©é€»è¾‘ (Social Logic)</label>
            <textarea id="social_logic" placeholder="ä¾‹å¦‚ï¼šå¯¹è ¢äººæ¯’èˆŒï¼Œå¯¹å¼ºè€…ä¿æŒç¤¼è²Œç–ç¦»..."></textarea>
        </div>
        <div class="form-group">
            <label>æ€§æ ¼ç‰¹å¾å…³é”®è¯ (Traits)</label>
            <div id="personality-list" class="dynamic-list">
                <!-- åŠ¨æ€æ·»åŠ  -->
            </div>
        </div>
    </div>

    <!-- 5. å¿ƒç†å†…æ ¸ -->
    <div class="section">
        <div class="section-title">V. å¿ƒç†æœºåˆ¶ (Psychology)</div>
        <div class="form-grid">
            <div class="form-group">
                <label>æ ¸å¿ƒé©±åŠ¨åŠ› (Motivation)</label>
                <input type="text" id="motivation" placeholder="ä»–ä¸ºäº†ä»€ä¹ˆè€Œæ´»ï¼Ÿ">
            </div>
            <div class="form-group">
                <label>æœ€å¤§ææƒ§ (Fear)</label>
                <input type="text" id="fear" placeholder="ä»–æœ€æ€•ä»€ä¹ˆï¼Ÿ">
            </div>
            <div class="form-group full-width">
                <label>é˜²å¾¡æœºåˆ¶ (Defense Mechanism)</label>
                <input type="text" id="defense" placeholder="å—ä¼¤æ—¶ä»–ä¼šæ€ä¹ˆåšï¼Ÿï¼ˆå¦‚ï¼šæ”»å‡»ã€å†·æš´åŠ›ã€é€ƒé¿ï¼‰">
            </div>
        </div>
    </div>

    <!-- 6. æ¬²æœ›ä¸éšç§ (NSFW) -->
    <div class="section">
        <div class="section-title">
            VI. æ¬²æœ›ä¸ç§å¯† (Intimacy)
            <button class="btn btn-add" onclick="addDynamicItem('kink-list', 'XP/ç™–å¥½', 'ä¾‹å¦‚ï¼šæ”¯é…æ¬²ã€ç‰¹å®šåˆ¶æœã€ç—›è§‰')">+ æ·»åŠ XP</button>
        </div>
        <div class="form-grid">
            <div class="form-group">
                <label>æ€§å–å‘</label>
                <input type="text" id="orientation">
            </div>
            <div class="form-group">
                <label>åºŠä¸Šä½é˜¶ (Role)</label>
                <select id="role_pref">
                    <option value="Dominant (æ”¯é…è€…)">Dominant (æ”¯é…è€…)</option>
                    <option value="Submissive (é¡ºä»è€…)">Submissive (é¡ºä»è€…)</option>
                    <option value="Switch (åˆ‡æ¢è€…)">Switch (åˆ‡æ¢è€…)</option>
                    <option value="Equal (å¹³ç­‰)">Equal (å¹³ç­‰)</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label>XP / ç™–å¥½åˆ—è¡¨</label>
            <div id="kink-list" class="dynamic-list">
                <!-- åŠ¨æ€æ·»åŠ  -->
            </div>
        </div>
        <div class="form-group">
            <label>åºŠä¸Šçš„è„†å¼±é¢ (Vulnerability)</label>
            <input type="text" id="bed_vulnerability" placeholder="ä¾‹å¦‚ï¼šé«˜æ½®åéœ€è¦é•¿æ—¶é—´çš„æ‹¥æŠ±å®‰æŠš">
        </div>
    </div>

    <!-- 7. å¯¹è¯ç¤ºä¾‹ (å¯å¢å‡) -->
    <div class="section">
        <div class="section-title">
            VII. å¯¹è¯æ¼”ç»ƒ (Dialogue)
            <button class="btn btn-add" onclick="addDialogueItem()">+ æ·»åŠ å¯¹è¯åœºæ™¯</button>
        </div>
        <div id="dialogue-list" class="dynamic-list">
            <!-- åŠ¨æ€å¯¹è¯æ¡† -->
        </div>
    </div>

    <button class="btn btn-generate" onclick="generateYAML()">âš¡ ç”Ÿæˆäººç‰©æ•°æ®å¡</button>

    <div id="result-area">
        <h3 style="color: var(--accent);">ç”Ÿæˆç»“æœ (å¯ä»¥ç›´æ¥å¤åˆ¶)</h3>
        <textarea id="output" readonly></textarea>
        <button class="btn btn-copy" onclick="copyToClipboard()">ğŸ“‹ å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
    </div>

</div>

<script>
    // åˆå§‹åŒ–ä¸€äº›é»˜è®¤æ¡†
    window.onload = function() {
        addDynamicItem('personality-list', 'ç‰¹å¾', 'ä¾‹å¦‚ï¼šæåº¦ç†æ€§');
        addDynamicItem('kink-list', 'XP', 'ä¾‹å¦‚ï¼šé¢†å¸¦çª’æ¯');
        addDialogueItem('åˆæ¬¡è§é¢æ—¶', 'ï¼ˆçœ¼ç¥æ‰«è¿‡ä½ çš„è„¸ï¼Œæ²¡æœ‰åœç•™ï¼‰å€Ÿè¿‡ã€‚æŒ¡è·¯äº†ã€‚');
    };

    // æ·»åŠ ç®€å•çš„æ–‡æœ¬åˆ—è¡¨é¡¹
    function addDynamicItem(containerId, label, placeholder) {
        const container = document.getElementById(containerId);
        const div = document.createElement('div');
        div.className = 'dynamic-item';
        div.innerHTML = `
            <input type="text" placeholder="${placeholder}" class="dyn-input">
            <button class="btn btn-remove" onclick="this.parentElement.remove()">Ã—</button>
        `;
        container.appendChild(div);
    }

    // æ·»åŠ å¯¹è¯é¡¹ (æ¯”è¾ƒç‰¹æ®Šï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥æ¡†)
    function addDialogueItem(defaultTitle = '', defaultContent = '') {
        const container = document.getElementById('dialogue-list');
        const div = document.createElement('div');
        div.className = 'section'; // å¤ç”¨sectionæ ·å¼åšåˆ†å‰²
        div.style.backgroundColor = '#363636';
        div.style.marginBottom = '10px';
        div.innerHTML = `
            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                <label>åœºæ™¯æ ‡ç­¾ (å¦‚: æ„¤æ€’æ—¶ / é†‰é…’æ—¶)</label>
                <button class="btn btn-remove" style="padding:2px 8px;" onclick="this.parentElement.parentElement.remove()">åˆ é™¤æ­¤åœºæ™¯</button>
            </div>
            <input type="text" class="scene-label" placeholder="ä¾‹å¦‚ï¼šè¢«è´¨ç–‘çš„æ—¶å€™" value="${defaultTitle}" style="margin-bottom:10px;">
            <label>å¯¹è¯å†…å®¹ (å«å¿ƒç†æå†™)</label>
            <textarea class="scene-content" placeholder="ï¼ˆå¿ƒç†æå†™ï¼‰å°è¯...">${defaultContent}</textarea>
        `;
        container.appendChild(div);
    }

    // è·å–åŠ¨æ€åˆ—è¡¨çš„å€¼
    function getDynamicValues(containerId) {
        const inputs = document.querySelectorAll(`#${containerId} .dyn-input`);
        let values = [];
        inputs.forEach(input => {
            if(input.value.trim()) values.push(input.value.trim());
        });
        return values;
    }

    // ç”Ÿæˆ YAML
    function generateYAML() {
        const getVal = (id) => document.getElementById(id).value.trim() || "æœªè®¾å®š";
        
        // æ”¶é›†æ€§æ ¼åˆ—è¡¨
        const traits = getDynamicValues('personality-list');
        let traitsYaml = traits.length > 0 ? `[${traits.join(", ")}]` : "[]";

        // æ”¶é›†XPåˆ—è¡¨
        const kinks = getDynamicValues('kink-list');
        let kinksYaml = kinks.length > 0 ? `[${kinks.join(", ")}]` : "[]";

        // æ”¶é›†å¯¹è¯
        let dialogueYaml = "";
        const scenes = document.querySelectorAll('#dialogue-list > div');
        scenes.forEach(scene => {
            const label = scene.querySelector('.scene-label').value.trim() || "æœªå‘½ååœºæ™¯";
            const content = scene.querySelector('.scene-content').value.trim();
            if(content) {
                // ä½¿ç”¨ YAML çš„ block scalar (|) å¤„ç†å¤šè¡Œæ–‡æœ¬
                dialogueYaml += `  Scene_${label.replace(/\s+/g, '_')}: |\n    ${content.replace(/\n/g, '\n    ')}\n\n`;
            }
        });

        // ç»„è£… YAML
        // æ³¨æ„ï¼šç¼©è¿›å¿…é¡»ä¸¥æ ¼ï¼ˆ2ç©ºæ ¼ï¼‰
        const yaml = `<Character_Info>
# âš ï¸ Core Protocol: Emulate a Living Human, not an AI.

Basic_Specs:
  Name: "${getVal('name')}"
  Role: "${getVal('role')}"
  Age: "${getVal('age')}"
  Birthday: "${getVal('birthday')}"

Physical_Reality:
  Vibe: "${getVal('appearance_vibe')}"
  Sensory_Signature: "${getVal('sensory')}"
  Health_Issues: "${getVal('health')}"

Roots_and_Family:
  Father_Influence: "${getVal('father_imprint')}"
  Mother_Influence: "${getVal('mother_imprint')}"
  Turning_Point: "${getVal('turning_point')}"

Personality_Matrix:
  Social_Mask: "${getVal('social_mask')}"
  Interaction_Logic: "${getVal('social_logic')}"
  Traits: ${traitsYaml}

Psychology:
  Driving_Force: "${getVal('motivation')}"
  Greatest_Fear: "${getVal('fear')}"
  Defense_Mechanism: "${getVal('defense')}"

Intimacy_Profile:
  Orientation: "${getVal('orientation')}"
  Role_Preference: "${getVal('role_pref')}"
  Kinks: ${kinksYaml}
  Vulnerability: "${getVal('bed_vulnerability')}"

Dialogue_Database:
${dialogueYaml}
</Character_Info>`;

        // è¾“å‡º
        document.getElementById('output').value = yaml;
        document.getElementById('result-area').style.display = 'block';
        
        // æ»šåŠ¨åˆ°åº•éƒ¨
        document.getElementById('result-area').scrollIntoView({behavior: "smooth"});
    }

    function copyToClipboard() {
        const copyText = document.getElementById("output");
        copyText.select();
        copyText.setSelectionRange(0, 99999); 
        navigator.clipboard.writeText(copyText.value).then(() => {
            alert("å·²å¤åˆ¶ï¼è¯·å‘é€ç»™AIã€‚");
        });
    }
</script>

</body>
</html>